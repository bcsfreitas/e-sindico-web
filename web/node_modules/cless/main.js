#!/usr/bin/env node

var less = require('less');
var fs = require('fs');

if(!fs.existsSync('./less-config.json')){
    console.log('Arquivo less-pack.json n√£o encontrado');
    return false;
}

var file = fs.readFileSync('./less-config.json',{encoding:'utf-8'});
file = JSON.parse(file);

file.forEach(function(e,i){
    var options = {
        filename:e.input,
        compress:e.compress?e.compress:false
    }
    var code = fs.readFileSync(e.input,{encoding:'utf-8'});
    
    less.render(code,options,function(s,output){
        fs.writeFileSync(e.output,output.css);
    })

})